{"version":3,"sources":["speakers.js","tags.js","time.js"],"names":["speakerInput","document","querySelector","speakers","speakersFiltered","speakersList","speakerHidden","selectSpeaker","e","speaker","target","previousSpeaker","classList","remove","add","value","dataset","speakerId","async","response","fetch","arraySpeaker","map","name","trim","lastname","id","componentsFormat","json","getSpeakers","addEventListener","search","length","expression","RegExp","filter","toLowerCase","firstChild","removeChild","forEach","speakerHTML","createElement","textContent","onclick","appendChild","noResult","showSpeakers","url","getSpeaker","speakerDOM","tagsInput","tagsDiv","tagsInputHidden","tags","showTags","tag","tag2","ondblclick","deleteTag","updateInputHidden","console","log","toString","split","keyCode","preventDefault","category","days","querySelectorAll","inputHiddenDay","inputHiddenTime","endSearch","day","category_id","previousTime","Object","values","includes","searchEvent","result","events","listTime","li","timeTaken","event","time_id","listTimeArray","Array","from","timeId","time","selectTime","getAvailableTime","timeSelected"],"mappings":"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","file":"bundle.js","sourcesContent":["(function() {\n    const speakerInput = document.querySelector('#speakers');\n    if(speakerInput) {\n        let speakers = [];\n        let speakersFiltered = [];\n        const speakersList = document.querySelector('#speakers-list');\n        const speakerHidden = document.querySelector('[name=\"speaker_id\"]');\n        getSpeakers();\n        speakerInput.addEventListener('input', searchSpeakers);\n        if(speakerHidden.value) {\n            (async () => {\n                const speaker = await getSpeaker(speakerHidden.value);\n                const {name, lastname} = speaker;\n                const speakerDOM = document.createElement('LI');\n                speakerDOM.classList.add('speakers-list__speaker', 'speakers-list__speaker--selected');\n                speakerDOM.textContent = `${name} ${lastname}`;\n                speakersList.appendChild(speakerDOM);\n            })();\n        }\n        async function getSpeakers() {\n            const url = `/api/speakers`;\n            const response = await fetch(url);\n            const result = await response.json();\n            componentsFormat(result);\n        }\n        async function getSpeaker(id) {\n            const url = `/api/speaker?id=${id}`;\n            const response = await fetch(url);\n            const result = await response.json();\n            return result;\n        }\n        function componentsFormat(arraySpeaker = []) {\n            speakers = arraySpeaker.map(speaker => {\n                return {\n                    name: `${speaker.name.trim()} ${speaker.lastname.trim()}`,\n                    id: speaker.id\n                }\n            });\n        }\n        function searchSpeakers(e) {\n            const search = e.target.value;\n            if(search.length >= 3) {\n                const expression = new RegExp(search, \"i\");\n                speakersFiltered = speakers.filter(speaker => {\n                    if(speaker.name.toLowerCase().search(expression) != -1) {\n                        return speaker;\n                    }\n                });\n            } else {\n                speakersFiltered = [];\n            }\n            showSpeakers();\n        }\n        function showSpeakers() {\n            while(speakersList.firstChild) {\n                speakersList.removeChild(speakersList.firstChild);\n            }\n            if(speakersFiltered.length > 0) {\n                speakersFiltered.forEach(speaker => {\n                    const speakerHTML = document.createElement('LI');\n                    speakerHTML.classList.add('speakers-list__speaker');\n                    speakerHTML.textContent = speaker.name;\n                    speakerHTML.dataset.speakerId = speaker.id;\n                    speakerHTML.onclick = selectSpeaker;\n                    speakersList.appendChild(speakerHTML);\n                });\n            } else {\n                const noResult = document.createElement('P');\n                noResult.classList.add('speakers-list__no-result');\n                noResult.textContent = 'No results for your search';\n                speakersList.appendChild(noResult);\n            }\n        }\n        function selectSpeaker(e) {\n            const speaker = e.target;\n            const previousSpeaker = document.querySelector('.speakers-list__speaker--selected');\n            if(previousSpeaker) {\n                previousSpeaker.classList.remove('speakers-list__speaker--selected');\n            }\n            speaker.classList.add('speakers-list__speaker--selected');\n            speakerHidden.value = speaker.dataset.speakerId;\n        }\n    }\n})();","(function() {\n    const tagsInput = document.querySelector('#tags_input');\n    if(tagsInput) {\n        const tagsDiv = document.querySelector('#tags');\n        const tagsInputHidden = document.querySelector('[name=\"tags\"]');\n        let tags = [];\n        if(tagsInputHidden.value !== '') {\n            tags = tagsInputHidden.value.split(',');\n            showTags();\n        }\n        tagsInput.addEventListener('keypress', saveTag);\n        function saveTag(e) {\n            if(e.keyCode === 44) {\n                if(e.target.value.trim() === '' || e.target.value < 1) {\n                    return;\n                }\n                e.preventDefault();\n                tags = [...tags, e.target.value.trim()];\n                tagsInput.value = '';\n                showTags();\n            }\n        }\n        function showTags() {\n            tagsDiv.textContent = '';\n            tags.forEach(tag => {\n                const tag2 = document.createElement('LI');\n                tag2.classList.add('form__tag');\n                tag2.textContent = tag;\n                tag2.ondblclick = deleteTag;\n                tagsDiv.appendChild(tag2);\n            });\n            updateInputHidden();\n        }\n        function deleteTag(e) {\n            e.target.remove();\n            tags = tags.filter(tag => tag !== e.target.textContent);\n            console.log(tags);\n            updateInputHidden();\n        }\n        function updateInputHidden() {\n            tagsInputHidden.value = tags.toString();\n        }\n    }\n})();","(function() {\n    const time = document.querySelector('#time');\n\n    if(time) {\n        const category = document.querySelector('[name=category_id]');\n        const days = document.querySelectorAll('[name=day]');\n        const inputHiddenDay = document.querySelector('[name=day_id]');\n        const inputHiddenTime = document.querySelector('[name=time_id]');\n\n        category.addEventListener('change', endSearch)\n        days.forEach(day => day.addEventListener('change', endSearch));\n\n        let search = {\n            category_id: +category.value || '',\n            day: +inputHiddenDay.value || ''\n        }\n\n        if(!Object.values(search).includes('')) {\n            (async () => {\n                await searchEvent();\n                const id = inputHiddenTime.value;\n                const timeSelected = document.querySelector(`[data-time-id=\"${id}\"]`);\n                timeSelected.classList.remove('time__hour--disable');\n                timeSelected.classList.add('time__hour--selected');\n                timeSelected.onclick = selectTime;\n            })();\n        }\n\n        function endSearch(e) {\n            search[e.target.name] = e.target.value;\n\n            inputHiddenTime.value = '';\n            inputHiddenDay.value = '';\n\n            const previousTime = document.querySelector('.time__hour--selected');\n            if(previousTime) {\n                previousTime.classList.remove('time__hour--selected');\n            }\n\n            if(Object.values(search).includes('')) {\n                return;\n            }\n\n            searchEvent();\n        }\n\n        async function searchEvent() {\n            const {day, category_id} = search;\n            const url = `/api/events-time?day_id=${day}&category_id=${category_id}`;\n\n            const result = await fetch(url);\n            const events = await result.json();\n            getAvailableTime(events);\n        }\n\n        function getAvailableTime(events) {\n            const listTime = document.querySelectorAll('#time li');\n            listTime.forEach(li => li.classList.add('time__hour--disable'));\n\n            const timeTaken = events.map(event => event.time_id);\n            const listTimeArray = Array.from(listTime);\n\n            const result = listTimeArray.filter(li => !timeTaken.includes(li.dataset.timeId));\n            result.forEach(li => li.classList.remove('time__hour--disable'));\n\n            const availableTime = document.querySelectorAll('#time li:not(.time__hour--disable)');\n            availableTime.forEach(time => time.addEventListener('click', selectTime));\n        }\n\n        function selectTime(e) {\n            const previousTime = document.querySelector('.time__hour--selected');\n            if(previousTime) {\n                previousTime.classList.remove('time__hour--selected');\n            }\n\n            e.target.classList.add('time__hour--selected');\n\n            inputHiddenTime.value = e.target.dataset.timeId\n\n            inputHiddenDay.value = document.querySelector('[name=\"day\"]:checked').value;\n        }\n    }\n})();\n"]}