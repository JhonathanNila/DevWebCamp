{"version":3,"sources":["speakers.js","tags.js","time.js"],"names":["speakerInput","document","querySelector","speakers","speakersFiltered","speakersList","speakerHidden","searchSpeakers","e","search","target","value","length","expression","RegExp","filter","speaker","name","toLowerCase","firstChild","removeChild","forEach","speakerHTML","createElement","classList","add","textContent","dataset","speakerId","id","onclick","selectSpeaker","appendChild","noResult","showSpeakers","previousSpeaker","remove","async","response","fetch","arraySpeaker","map","trim","lastname","componentsFormat","json","addEventListener","getSpeakers","tagsInput","tagsDiv","tagsInputHidden","tags","showTags","tag","tag2","ondblclick","deleteTag","updateInputHidden","console","log","toString","split","keyCode","preventDefault","category","days","querySelectorAll","inputHiddenDay","inputHiddenTime","endSearch","day","category_id","previousTime","Object","values","includes","url","result","events","listTime","li","timeTaken","event","time_id","listTimeArray","Array","from","timeId","time","selectTime","getAvailableTime","searchEvent"],"mappings":"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","file":"bundle.js","sourcesContent":["(function() {\n    const speakerInput = document.querySelector('#speakers');\n    if(speakerInput) {\n        let speakers = [];\n        let speakersFiltered = [];\n        const speakersList = document.querySelector('#speakers-list');\n        const speakerHidden = document.querySelector('[name=\"speaker_id\"]');\n        getSpeakers();\n        async function getSpeakers() {\n            const url = `/api/speakers`;\n            const response = await fetch(url);\n            const result = await response.json();\n            componentsFormat(result);\n            speakerInput.addEventListener('input', searchSpeakers);\n        }\n        function componentsFormat(arraySpeaker = []) {\n            speakers = arraySpeaker.map(speaker => {\n                return {\n                    name: `${speaker.name.trim()} ${speaker.lastname.trim()}`,\n                    id: speaker.id\n                }\n            });\n        }\n        function searchSpeakers(e) {\n            const search = e.target.value;\n            if(search.length >= 3) {\n                const expression = new RegExp(search, \"i\");\n                speakersFiltered = speakers.filter(speaker => {\n                    if(speaker.name.toLowerCase().search(expression) != -1) {\n                        return speaker;\n                    }\n                });\n            } else {\n                speakersFiltered = [];\n            }\n            showSpeakers();\n        }\n        function showSpeakers() {\n            while(speakersList.firstChild) {\n                speakersList.removeChild(speakersList.firstChild);\n            }\n            if(speakersFiltered.length > 0) {\n                speakersFiltered.forEach(speaker => {\n                    const speakerHTML = document.createElement('LI');\n                    speakerHTML.classList.add('speakers-list__speaker');\n                    speakerHTML.textContent = speaker.name;\n                    speakerHTML.dataset.speakerId = speaker.id;\n                    speakerHTML.onclick = selectSpeaker;\n                    speakersList.appendChild(speakerHTML);\n                });\n            } else {\n                const noResult = document.createElement('P');\n                noResult.classList.add('speakers-list__no-result');\n                noResult.textContent = 'No results for your search';\n                speakersList.appendChild(noResult);\n            }\n        }\n        function selectSpeaker(e) {\n            const speaker = e.target;\n            const previousSpeaker = document.querySelector('.speakers-list__speaker--selected');\n            if(previousSpeaker) {\n                previousSpeaker.classList.remove('speakers-list__speaker--selected');\n            }\n            speaker.classList.add('speakers-list__speaker--selected');\n            speakerHidden.value = speaker.dataset.speakerId;\n        }\n    }\n})();","(function() {\n    const tagsInput = document.querySelector('#tags_input');\n    if(tagsInput) {\n        const tagsDiv = document.querySelector('#tags');\n        const tagsInputHidden = document.querySelector('[name=\"tags\"]');\n        let tags = [];\n        if(tagsInputHidden.value !== '') {\n            tags = tagsInputHidden.value.split(',');\n            showTags();\n        }\n        tagsInput.addEventListener('keypress', saveTag);\n        function saveTag(e) {\n            if(e.keyCode === 44) {\n                if(e.target.value.trim() === '' || e.target.value < 1) {\n                    return;\n                }\n                e.preventDefault();\n                tags = [...tags, e.target.value.trim()];\n                tagsInput.value = '';\n                showTags();\n            }\n        }\n        function showTags() {\n            tagsDiv.textContent = '';\n            tags.forEach(tag => {\n                const tag2 = document.createElement('LI');\n                tag2.classList.add('form__tag');\n                tag2.textContent = tag;\n                tag2.ondblclick = deleteTag;\n                tagsDiv.appendChild(tag2);\n            });\n            updateInputHidden();\n        }\n        function deleteTag(e) {\n            e.target.remove();\n            tags = tags.filter(tag => tag !== e.target.textContent);\n            console.log(tags);\n            updateInputHidden();\n        }\n        function updateInputHidden() {\n            tagsInputHidden.value = tags.toString();\n        }\n    }\n})();","(function() {\n    const time = document.querySelector('#time');\n\n    if(time) {\n        const category = document.querySelector('[name=category_id]');\n        const days = document.querySelectorAll('[name=day]');\n        const inputHiddenDay = document.querySelector('[name=day_id]');\n        const inputHiddenTime = document.querySelector('[name=time_id]');\n\n        category.addEventListener('change', endSearch)\n        days.forEach(day => day.addEventListener('change', endSearch));\n\n        let search = {\n            category_id: '',\n            day: ''\n        }\n\n        function endSearch(e) {\n            search[e.target.name] = e.target.value;\n\n            inputHiddenTime.value = '';\n            inputHiddenDay.value = '';\n\n            const previousTime = document.querySelector('.time__hour--selected');\n            if(previousTime) {\n                previousTime.classList.remove('time__hour--selected');\n            }\n\n            if(Object.values(search).includes('')) {\n                return;\n            }\n\n            searchEvent();\n        }\n\n        async function searchEvent() {\n            const {day, category_id} = search;\n            const url = `/api/events-time?day_id=${day}&category_id=${category_id}`;\n\n            const result = await fetch(url);\n            const events = await result.json();\n            getAvailableTime(events);\n        }\n\n        function getAvailableTime(events) {\n            const listTime = document.querySelectorAll('#time li');\n            listTime.forEach(li => li.classList.add('time__hour--disable'));\n\n            const timeTaken = events.map(event => event.time_id);\n            const listTimeArray = Array.from(listTime);\n\n            const result = listTimeArray.filter(li => !timeTaken.includes(li.dataset.timeId));\n            result.forEach(li => li.classList.remove('time__hour--disable'));\n\n            const availableTime = document.querySelectorAll('#time li:not(.time__hour--disable)');\n            availableTime.forEach(time => time.addEventListener('click', selectTime));\n        }\n\n        function selectTime(e) {\n            const previousTime = document.querySelector('.time__hour--selected');\n            if(previousTime) {\n                previousTime.classList.remove('time__hour--selected');\n            }\n\n            e.target.classList.add('time__hour--selected');\n\n            inputHiddenTime.value = e.target.dataset.timeId\n\n            inputHiddenDay.value = document.querySelector('[name=\"day\"]:checked').value;\n        }\n    }\n})();\n"]}